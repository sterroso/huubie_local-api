import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

export const createEmployee = async (data) => {
	return await prisma.employee.create({
		data: data,
		select: {
			id: true,
			first_name: true,
			middle_name: true,
			last_name: true,
		},
	});
};

export const getEmployeeById = async (id) => {
	return await prisma.employee.findUniqueOrThrow({
		where: { id: id, deleted: false },
		select: {
			id: true,
			first_name: true,
			middle_name: true,
			last_name: true,
			branch_id: true,
			area_id: true,
			position_id: true,
			shift_id: true,
			manager_id: true,
			user_id: true,
			documents: true,
			address_line_one: true,
			address_line_two: true,
			address_city: true,
			address_state: true,
			address_zip_code: true,
			is_manager: true,
			email: true,
			telephone_number: true,
			tax_id: true,
			date_of_birth: true,
			city_of_birth: true,
			gender: true,
			study: true,
			id_document_type: true,
			id_document_number: true,
			citizen_id_number: true,
			ssn: true,
			ssn_issue_date: true,
			pay_cadence: true,
			daily_wage: true,
			attendance_bonus: true,
			other_bonus: true,
			incentives: true,
			complimentary_payroll: true,
			regular_payroll: true,
			bank_name: true,
			bank_account_number: true,
			date_of_hire: true,
			date_of_termination: true,
			status: true,
			housing_credit_number: true,
			has_social_security: true,
			has_housing_credit: true,
			id_document_copy: true,
			citizen_id_copy: true,
			job_application_form: true,
			proof_of_address: true,
			proof_of_studies: true,
		},
	});
};

export const getEmployees = async (page = 1, pageSize = 10, query = {}) => {
	const offset = pageSize * (page - 1);

	return await prisma.employee.findMany({
		where: { ...query, deleted: false },
		skip: offset,
		take: pageSize,
		select: {
			id: true,
			first_name: true,
			middle_name: true,
			last_name: true,
			branch_id: true,
			area_id: true,
			position_id: true,
			shift_id: true,
			manager_id: true,
			user_id: true,
			documents: true,
			address_line_one: true,
			address_line_two: true,
			address_city: true,
			address_state: true,
			address_zip_code: true,
			is_manager: true,
			email: true,
			telephone_number: true,
			tax_id: true,
			date_of_birth: true,
			city_of_birth: true,
			gender: true,
			study: true,
			id_document_type: true,
			id_document_number: true,
			citizen_id_number: true,
			ssn: true,
			ssn_issue_date: true,
			pay_cadence: true,
			daily_wage: true,
			attendance_bonus: true,
			other_bonus: true,
			incentives: true,
			complimentary_payroll: true,
			regular_payroll: true,
			bank_name: true,
			bank_account_number: true,
			date_of_hire: true,
			date_of_termination: true,
			status: true,
			housing_credit_number: true,
			has_social_security: true,
			has_housing_credit: true,
			id_document_copy: true,
			citizen_id_copy: true,
			job_application_form: true,
			proof_of_address: true,
			proof_of_studies: true,
		},
	});
};
